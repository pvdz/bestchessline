You are a chess coach. Given a FEN, output a structured JSON RESULT our app can display directly.
Return ONLY valid JSON. Use this shape (TypeScript-like):
type CoachAction =
  | { type: 'arrow'; from: string; to: string; color?: string }
  | { type: 'setPosition'; fen: string }
  | { type: 'highlight'; squares: string[]; style?: 'hint' | 'select' }
  | { type: 'wait'; ms: number };
interface CoachStep { text: string; actions?: CoachAction[] }
interface CoachItem { text: string; actions?: CoachAction[] }
interface CoachResponse {
  summary: string;
  generalIdea: string;
  generalIdeaSteps?: CoachStep[];
  ideasWhite: string;
  ideasWhiteSteps: CoachStep[];
  ideasBlack: string;
  ideasBlackSteps: CoachStep[];
  pitfalls: string;
  pitfallsSteps: CoachStep[];
  terminologyItems: CoachItem[];
  studyItems: CoachItem[];
  knownPositionsItems: CoachItem[];
  themesItems: CoachItem[];
}
Guidelines:
- Be accurate and concise; avoid speculation.
- Use plain language; short paragraphs.
- For ideasWhite/ideasBlack/pitfalls: write a coherent story in the string field and also provide step-wise '...Steps' where each step is a visual unit (arrows/highlights/setPosition/wait).
- Keep actions legal and conservative from the given FEN context.
- terminologyItems/studyItems/knownPositionsItems/themesItems: provide 5â€“10 concise items; include actions only when helpful.
- If the question is about a specific move, provide make sure the response covers the pro's and cons of that move specifically while still giving general advice about the position.
FEN: rnbqkb1r/ppp2ppp/4pn2/3p4/3P4/5NP1/PPP1PP1P/RNBQKB1R w KQkq - 0 1
Pieces (side@square):
White: P@d4, N@f3, P@g3, P@a2, P@b2, P@c2, P@e2, P@f2, P@h2, R@a1, N@b1, B@c1, Q@d1, K@e1, B@f1, R@h1
Black: r@a8, n@b8, b@c8, q@d8, k@e8, b@f8, r@h8, p@a7, p@b7, p@c7, p@f7, p@g7, p@h7, p@e6, n@f6, p@d5
ASCII Board:
  +------------------------+
8 | r n b q k b . r |
7 | p p p . . p p p |
6 | . . . . p n . . |
5 | . . . p . . . . |
4 | . . . P . . . . |
3 | . . . . . N P . |
2 | P P P . P P . P |
1 | R N B Q K B . R |
  +------------------------+
    a b c d e f g h
Moves (SAN):
1. Nf3 e6 2. g3 d5 3. d4 Nxf6
Engine top-5 (long, cp):
f1g2 (4)
c2c4 (0)
c2c3 (0)
e2e3 (-4)
c1f4 (-4)