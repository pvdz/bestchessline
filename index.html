<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chess Analysis</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Chess Best Line Discovery</h1>
        <p>A simple tool to discover the next best move using Stockfish (v16). You can select how many lines Stockfish should report, which may be different for the current player (only the best move for white but best 5 responses for black, etc.).</p>
        
        <div class="main-content">
            <!-- Chess Board -->
            <div class="board-section">
                <h2>Chess Board</h2>
                <div id="chess-board"></div>
                <div class="board-controls">
                    <button id="reset-board">Reset</button>
                    <button id="clear-board">Clear</button>
                    <div class="fen-input">
                        <input type="text" id="fen-input" placeholder="Enter FEN position">
                        <button id="load-fen">Load</button>
                    </div>
                </div>
            </div>

            <!-- Analysis Controls -->
            <div class="controls-section">
                <h2>Analysis Controls</h2>
                <div class="control-group">
                    <label for="max-depth">Max Depth:</label>
                    <input type="number" id="max-depth" min="1" max="50" value="20">
                </div>
                <div class="control-group">
                    <label for="white-moves">White Moves:</label>
                    <input type="number" id="white-moves" min="1" max="20" value="5">
                </div>
                <div class="control-group">
                    <label for="black-moves">Black Moves:</label>
                    <input type="number" id="black-moves" min="1" max="20" value="5">
                </div>
                <div class="control-group">
                    <label for="threads">Threads:</label>
                    <input type="number" id="threads" min="1" max="8" value="1">
                </div>
                <div class="control-group">
                    <label for="hash-size">Hash Size (MB):</label>
                    <input type="number" id="hash-size" min="1" max="1024" value="32">
                </div>
                
                <div class="analysis-controls">
                    <button id="start-analysis">Start Analysis</button>
                    <button id="pause-analysis">Pause</button>
                    <button id="stop-analysis">Stop</button>
                </div>
                
                <div class="status">
                    <p id="status">Ready</p>
                </div>
            </div>

            <!-- Analysis Results -->
            <div class="results-section">
                <h2>Analysis Results</h2>
                <div class="results-controls">
                    <div class="radio-header">
                        <label>Notation:</label>
                        <label>Pieces:</label>
                    </div>
                    <div class="radio-options">
                        <div class="radio-column">
                            <label class="radio-label">
                                <input type="radio" name="notation-format" value="short" checked>
                                <span>Short (e4, Nf3)</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="notation-format" value="long">
                                <span>Long (e2-e4, Ng1-f3)</span>
                            </label>
                        </div>
                        <div class="radio-column">
                            <label class="radio-label">
                                <input type="radio" name="piece-format" value="unicode" checked>
                                <span>Unicode (♔♕♖♗♘♙)</span>
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="piece-format" value="english">
                                <span>English (KQRBNP)</span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="results-content">
                    <div id="analysis-results" class="results-panel">
                        <p>No analysis results yet.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Set up exports for UMD module
        window.exports = {};
        
        // Load Stockfish script
        var stockfishScript = document.createElement('script');
        stockfishScript.src = 'dist/stockfish.js';
        stockfishScript.onload = function() {
            console.log('Stockfish script loaded');
            // The UMD module should have set window.exports.Stockfish
            if (typeof window.exports.Stockfish !== 'undefined') {
                window.Stockfish = window.exports.Stockfish;
                console.log('Stockfish exposed to window.Stockfish');
            } else {
                console.error('window.exports.Stockfish is undefined');
            }
        };
        stockfishScript.onerror = function() {
            console.error('Failed to load stockfish.js');
        };
        document.head.appendChild(stockfishScript);
    </script>
    <script type="module" src="dist/app.js"></script>
</body>
</html> 